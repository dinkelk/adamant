\input{common_packages.tex}

\begin{document}

\title{\textbf{Ccsds Packetizer} \\
\large\textit{Component Design Document}}
\date{}
\maketitle

\section{Description}
\input{build/tex/ccsds_packetizer_description.tex}

\section{Requirements}
\input{build/tex/ccsds_packetizer_requirements.tex}

\section{Design}

\subsection{Conversion Algorithm}
The packetizer converts an Adamant \texttt{Packet.T} to a \texttt{Ccsds\_Space\_Packet.T} by:
\begin{enumerate}
  \item Constructing the CCSDS primary header from the Adamant packet header fields (ID mapped to APID, sequence count preserved).
  \item Serializing the 8-byte timestamp into the secondary header region of the CCSDS data field.
  \item Copying \texttt{Buffer\_Length} bytes of payload data immediately after the timestamp.
  \item Computing a CRC-16-CCITT over the entire packet (primary header through end of payload) using a memory overlay of the packed record, and appending the 2-byte CRC as the final bytes of the data field.
\end{enumerate}

The memory overlay technique assumes that \texttt{Ccsds\_Space\_Packet.T} has a contiguous, padding-free layout. A compile-time check enforces this assumption.

\subsection{At a Glance}
\input{build/tex/ccsds_packetizer_stats.tex}

\subsection{Diagram}
\begin{figure}[H]
  \includegraphics[width=1.0\textwidth,center]{../build/eps/ccsds_packetizer.eps}
  \caption{Ccsds Packetizer component diagram.}
\end{figure}

\subsection{Connectors}
\input{build/tex/ccsds_packetizer_connectors.tex}

\subsection{Initialization}
\input{build/tex/ccsds_packetizer_init.tex}

\section{Unit Tests}

\input{build/tex/ccsds_packetizer_unit_test.tex}

\section{Appendix}
\subsection{Packed Types}

\input{build/tex/ccsds_packetizer_types.tex}

\subsection{Enumerations}

\input{build/tex/ccsds_packetizer_enums.tex}

\end{document}
